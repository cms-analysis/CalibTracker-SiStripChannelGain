process ICALIB = {
   #keep the logging output to a nice level
#   include "DQM/SiStripCommon/data/MessageLogger.cfi"
   include "FWCore/MessageLogger/data/MessageLogger.cfi"

#Geometry
include "Geometry/CMSCommonData/data/cmsMTCCGeometryXML.cfi"
# tracker numbering
include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
# tracker geometry
include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

# magnetic field
#include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
include "MagneticField/Engine/data/uniformMagneticField.cfi"

es_module = TrackerRecoGeometryESProducer {}
 
# KFUpdatoerESProducer
include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"
 
# Chi2MeasurementEstimatorESProducer
include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi" 

# KFTrajectoryFitterESProducer
include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"

# KFTrajectorySmootherESProducer
include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"

# KFFittingSmootherESProducer
include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"

# PropagatorWithMaterialESProducer
include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"

# PropagatorWithMaterialESProducer
include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"

# stripCPE
include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

# pixelCPE
include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"

#TransientTrackingBuilder
include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"

   # Cabling
   es_source FedCablingFromExampleSqliteFile = PoolDBESSource {
                   VPSet toGet            = { { string record = "SiStripFedCablingRcd" string tag = "test" } }
                  string connect          = "sqlite_file:/afs/cern.ch/user/d/dkcira/public/MTCC/Cabling/SiStripFedCabling.db"
        untracked string catalog          = "file:/afs/cern.ch/user/d/dkcira/public/MTCC/Cabling/SiStripFedCabling.xml"
                  string timetype         = "endoftime"
        untracked uint32 messagelevel     = 0
   }
  # produce SiStripFecCabling and SiStripDetCabling out of SiStripFedCabling
  es_module sistripconn = SiStripConnectivity {}

#===============================================================================
  # input source
# files with possible problems - have to find out which problems
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2552_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2647_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2649_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2654_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2658_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2659_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2660_reco_full.root",
#"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2661_reco_full.root"
  source = PoolSource { 
      untracked vstring fileNames = {
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2476_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2478_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2479_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2480_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2501_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2502_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2503_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2505_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2506_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2507_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2515_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2516_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2517_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2518_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2523_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2524_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2525_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2526_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2527_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2529_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2530_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2531_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2532_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2534_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2544_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2545_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2546_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2547_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2548_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2549_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2550_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2555_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2556_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2557_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2559_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2560_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2561_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2564_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2565_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2567_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2568_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2569_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2570_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2571_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2577_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2578_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2579_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2580_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2581_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2583_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2584_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2587_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2589_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2590_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2591_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2593_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2594_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2596_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2599_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2600_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2602_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2603_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2605_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2610_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2613_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2614_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2615_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2616_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2617_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2618_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2621_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2622_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2623_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2624_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2625_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2626_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2631_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2632_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2636_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2637_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2638_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2639_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2640_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2641_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2642_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2643_reco_full.root",
"file:rfio:/castor/cern.ch/cms/testbeam/tkmtcc/P5_data/tracker_reprocessing/pass2_with_alignment/2645_reco_full.root"
      }
//      untracked int32 maxEvents = 5800
//      untracked uint32 skipEvents = 5800
      untracked uint32 maxEvents = -1
  }

  # analyzer
  module siStripApvGainCalculator = SiStripApvGainCalculator {
     bool OutputHistogramsInRootFile = true
     string OutputFileName = "output_histograms.root"
     string TrackProducer  = "cosmictrackfinder"
     string TrackLabel     = ""
     bool   MTCCtrack      = true
     string TTRHBuilder="WithTrackAngle"
      # detector modules to be excluded
      vuint32 detModulesToBeExcluded = {369214217, 369214218 }
  }

//  module AsciiOutputModule = AsciiOutputModule {}

  # schedule
  path p = { siStripInternalChargeCalibration }
//  endpath ep = {AsciiOutputModule}
#===============================================================================
}

